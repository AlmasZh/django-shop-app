{% extends 'products/base.html' %}
{% block content %}
{% load static %}
<div class="min-h-screen flex flex-col md:flex-row">
	<!-- Left side - Image -->
	<div class="hidden md:flex md:w-1/2 bg-muted items-center justify-center p-6">
		<div class="max-w-md text-center">
			<div class="mb-4 flex justify-center"></div>
			<h1 class="text-3xl font-bold mb-4">Vivid Store</h1>
			<p class="text-muted-foreground mb-6">
				Discover the latest trends and styles. Sign in to access your account or create a new one to start shopping.
			</p>
			<div class="aspect-video relative overflow-hidden rounded-xl">
				<img
					src="https://images.unsplash.com/photo-1567401893414-76b7b1e5a7a5?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=400&q=80"
					alt="Fashion collection"
					class="object-cover w-full h-full"
				/>
			</div>
		</div>
	</div>

	<!-- Right side - Auth forms -->
	<div class="flex-1 flex items-center justify-center p-6 bg-gray-100">
		<div class="w-full max-w-md space-y-8">
			<div class="text-center mb-8">
				<div class="flex justify-center md:hidden mb-4">
					<i class="fas fa-shopping-bag text-primary text-3xl"></i>
				</div>
				<h2 class="text-2xl font-bold">Welcome to Fashion Store</h2>
				<p class="text-muted-foreground">Sign in to your account or create a new one</p>
			</div>

			<div class="w-full">
				<!-- Tabs -->
				<div class="grid w-full grid-cols-2 mb-8 rounded-md overflow-hidden">
					<button
						id="login-tab"
						class="tabs-trigger active py-2 font-medium text-sm transition-colors focus:outline-none"
					>
						Login
					</button>
					<button id="register-tab" class="tabs-trigger py-2 font-medium text-sm transition-colors focus:outline-none">
						Register
					</button>
				</div>

				<!-- Login Form -->
				<div id="login-content" class="tab-content active space-y-6">
					<form method="post" class="space-y-6">
						{% csrf_token %}

						<div class="space-y-2">
							<label for="{{ form.email.id_for_label }}" class="block text-sm font-medium">
								{{ form.email.label|default:"Email" }}
							</label>
							{{ form.email }} {% if form.email.errors %}
							<div class="text-red-500">{% for error in form.email.errors %} {{ error }} {% endfor %}</div>
							{% endif %}
						</div>

						<div class="space-y-2">
							<div class="flex items-center justify-between">
								<label for="{{ form.password.id_for_label }}" class="block text-sm font-medium">
									{{ form.password.label|default:"Password" }}
								</label>
								{% comment %} <a href="{% url 'password_reset' %}" class="text-sm text-primary hover:underline">Forgot password?</a> {% endcomment %}
							</div>
							<div class="relative">
								{{ form.password }}
								<button
									type="button"
									class="absolute right-0 top-0 h-full px-3 py-2 text-gray-500"
									onclick="togglePasswordVisibility('id_password')"
								>
									<i class="fas fa-eye"></i>
								</button>
								{% if form.password.errors %}
								<div class="text-red-500">{% for error in form.password.errors %} {{ error }} {% endfor %}</div>
								{% endif %}
							</div>
						</div>

						{% if form.non_field_errors %}
						<div class="text-red-500">{% for error in form.non_field_errors %} {{ error }} {% endfor %}</div>
						{% endif %}

						<button
							type="submit"
							class="w-full py-2 px-4 bg-primary text-white font-medium rounded-md bg-gradient-to-r from-[#DD8AB7] to-[#ec85fe] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
						>
							Sign In
						</button>
					</form>
				</div>
				<!-- Register Form -->
				<div id="register-content" class="tab-content space-y-6">
					<form method="post" class="space-y-6">
						{% csrf_token %}
						
						<div class="grid grid-cols-2 gap-4">
							<div class="space-y-2">
								<label for="{{ register_form.first_name.id_for_label }}" class="block text-sm font-medium">
									First name
								</label>
								{{ register_form.first_name }}
								{% if register_form.first_name.errors %}
									<div class="text-red-500 text-sm">
										{% for error in register_form.first_name.errors %}
											{{ error }}
										{% endfor %}
									</div>
								{% endif %}
							</div>
							<div class="space-y-2">
								<label for="{{ register_form.last_name.id_for_label }}" class="block text-sm font-medium">
									Last name
								</label>
								{{ register_form.last_name }}
								{% if register_form.last_name.errors %}
									<div class="text-red-500 text-sm">
										{% for error in register_form.last_name.errors %}
											{{ error }}
										{% endfor %}
									</div>
								{% endif %}
							</div>
						</div>
				
						<div class="space-y-2">
							<label for="{{ register_form.email.id_for_label }}" class="block text-sm font-medium">
								Email
							</label>
							{{ register_form.email }}
							{% if register_form.email.errors %}
								<div class="text-red-500 text-sm">
									{% for error in register_form.email.errors %}
										{{ error }}
									{% endfor %}
								</div>
							{% endif %}
						</div>
				
						<div class="space-y-2">
							<label for="{{ register_form.password.id_for_label }}" class="block text-sm font-medium">
								Password
							</label>
							<div class="relative">
								{{ register_form.password }}
								<button
									type="button"
									class="absolute right-0 top-0 h-full px-3 py-2 text-gray-500"
									onclick="togglePasswordVisibility('id_password')"
								>
									<i class="fas fa-eye"></i>
								</button>
								{% if register_form.password.errors %}
									<div class="text-red-500 text-sm">
										{% for error in register_form.password.errors %}
											{{ error }}
										{% endfor %}
									</div>
								{% endif %}
							</div>
						</div>
				
						<div class="space-y-2">
							<label for="{{ register_form.confirm_password.id_for_label }}" class="block text-sm font-medium">
								Confirm Password
							</label>
							<div class="relative">
								{{ register_form.confirm_password }}
								<button
									type="button"
									class="absolute right-0 top-0 h-full px-3 py-2 text-gray-500"
									onclick="togglePasswordVisibility('id_confirm_password')"
								>
									<i class="fas fa-eye"></i>
								</button>
								{% if register_form.confirm_password.errors %}
									<div class="text-red-500 text-sm">
										{% for error in register_form.confirm_password.errors %}
											{{ error }}
										{% endfor %}
									</div>
								{% endif %}
							</div>
						</div>
				
						{% if register_form.non_field_errors %}
							<div class="text-red-500 text-sm">
								{% for error in register_form.non_field_errors %}
									{{ error }}
								{% endfor %}
							</div>
						{% endif %}
				
						<button
							type="submit"
							class="w-full py-2 px-4 bg-primary text-white font-medium rounded-md bg-gradient-to-r from-[#DD8AB7] to-[#ec85fe] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"
						>
							Create Account
						</button>
					</form>
				</div>
				<div class="flex justify-center mt-5 text-gray-300">
					<a href="{% url 'products:home' %}">exit</a>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	// Tab switching functionality
	document.getElementById("login-tab").addEventListener("click", function () {
		document.getElementById("login-tab").classList.add("active");
		document.getElementById("register-tab").classList.remove("active");
		document.getElementById("login-content").classList.add("active");
		document.getElementById("register-content").classList.remove("active");
	});

	document.getElementById("register-tab").addEventListener("click", function () {
		document.getElementById("register-tab").classList.add("active");
		document.getElementById("login-tab").classList.remove("active");
		document.getElementById("register-content").classList.add("active");
		document.getElementById("login-content").classList.remove("active");
	});

	// Password visibility toggle
	function togglePasswordVisibility(inputId) {
		const input = document.getElementById(inputId);
		const button = input.nextElementSibling;
		const icon = button.querySelector("i");

		if (input.type === "password") {
			input.type = "text";
			icon.classList.remove("fa-eye");
			icon.classList.add("fa-eye-slash");
		} else {
			input.type = "password";
			icon.classList.remove("fa-eye-slash");
			icon.classList.add("fa-eye");
		}
	}
</script>
<script>
	function togglePasswordVisibility(inputId) {
		const passwordInput = document.getElementById(inputId);
		passwordInput.type = passwordInput.type === "password" ? "text" : "password";
	}
</script>

{% endblock %}